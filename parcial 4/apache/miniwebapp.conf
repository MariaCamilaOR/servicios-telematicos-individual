<VirtualHost *:80>
    ServerName localhost
    RewriteEngine On
    RewriteCond %{HTTPS} off
    RewriteRule ^/(.*)$ https://%{HTTP_HOST}/$1 [R=301,L]
</VirtualHost>

<IfModule mod_ssl.c>
<VirtualHost *:443>
    ServerName localhost

    SSLEngine on
    SSLCertificateFile    /etc/apache2/ssl/webapp.crt
    SSLCertificateKeyFile /etc/apache2/ssl/webapp.key

    ProxyPreserveHost On
    ProxyPass        / http://webapp:5000/
    ProxyPassReverse / http://webapp:5000/

    Header always set Strict-Transport-Security "max-age=31536000"
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-Frame-Options "DENY"
    Header always set X-XSS-Protection "1; mode=block"
</VirtualHost>
</IfModule>

